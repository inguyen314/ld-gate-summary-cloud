<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Realtime LD Gate Summary</title>
    <meta name="Description" content="U.S. Army Corps of Engineers St. Louis District Home Page" />
    <link rel="stylesheet" href="css/body.css" />
    <link rel="stylesheet" href="css/breadcrumbs.css" />
    <link rel="stylesheet" href="css/jumpMenu.css" />
    <link rel="stylesheet" href="css/sidebar.css" />
    <link rel="stylesheet" href="css/ld_gate_summary.css" />
    <script src="js/main.js"></script>
    <script src="js/moment.min.js"></script>
    <script src="js/moment-timezone-with-data.js"></script>
    <script src="js/chart.js"></script>
    <script src="js/chartjs-adapter-moment.min.js"></script>
</head>

<body>
    <div id="page-container">
        <header id="header">
            <!--Header content populated here by JavaScript Tag at end of body -->
        </header>
        <div class="page-wrap">
            <div class="container-fluid">
                <div id="breadcrumbs">
                </div>
                <div class="page-content">
                    <sidebar id="sidebar"></sidebar>
                    <div id="topPane" class="col-md backend-cp-collapsible">
                        <div class="box-usace">
                            <h2 class="box-header-striped">
                                <span class="titleLabel title"></span>
                                <span class="rss"></span>
                            </h2>
                            <div class="box-content" style="background-color:white;margin:auto">
                                <div class="content">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Start Div -->
                <script>
                    // Create a URL object with the current page URL
                    const urlParams = new URLSearchParams(window.location.search);

                    // Calculate the document root
                    const documentRoot = window.location.protocol + "//" + window.location.host + "/";

                    var office = urlParams.get('office') || "MVS";
                    console.log('office: ', office);

                    var selectedBasin = urlParams.get('basin') || "Mississippi";
                    console.log('selectedBasin: ', selectedBasin);

                    var basin = urlParams.get('basin') || "Mississippi";
                    console.log('basin: ', basin);

                    var type = urlParams.get('type') || null;
                    console.log('type: ', type);

                    // Determine the default value of cda based on documentRoot
                    if (documentRoot === `https://wm.${office.toLocaleLowerCase()}.ds.usace.army.mil/`) {
                        cdaDefault = "internal";
                    } else if (documentRoot === `https://wm-${office.toLocaleLowerCase()}coop.mvk.ds.usace.army.mil/`) {
                        cdaDefault = "internal-coop";
                    } else {
                        cdaDefault = "public";
                    }
                    console.log("cdaDefault: ", cdaDefault);

                    var cda = urlParams.get('cda') || cdaDefault;
                    console.log('cda: ', cda);

                    let mobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)
                        || window.innerWidth <= 768;

                    console.log("Is this site viewed on mobile?", mobile);
                </script>

                <script>
                    // Function to detect if the device is mobile
                    function isMobile() {
                        return /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
                    }

                    // Function to print the table if the device is mobile
                    function printTableIfMobile() {
                        if (isMobile()) {
                            document.getElementById("gage_data1").style.display = "table";
                            document.getElementById("gage_data2").style.display = "table";
                            document.getElementById("gage_data3").style.display = "table";
                        }
                    }

                    // Call the function when the page loads
                    window.onload = printTableIfMobile;
                </script>

                <div id="loading_ld_gate_summary" style="display: none;"><img src="images/loading4.gif"
                        style='height: 50px; width: 50px;' alt="Loading..." /></div>
                <div id="table_container_ld_gate_summary"></div>
                <script src="ld_gate_summary.js"></script>

                <!-- if type === blackberry -->
                <div id="loading_blackberry" style="display: none;"><img src="images/loading4.gif"
                        style='height: 50px; width: 50px;' alt="Loading..." /></div>
                <div id="table_container_blackberry"></div>
                <script src="blackberry.js"></script>

                <div id="loading_lakes" style="display: none;"><img src="images/loading4.gif"
                        style='height: 50px; width: 50px;' alt="Loading..." /></div>
                <div id="table_container_lakes"></div>
                <script src="lakes.js"></script>
                <!-- End Div -->

                <table id="gage_data1" style="display:none;">
                    <thead>
                        <tr>
                            <th>Locks and Dams</th>
                            <th>Work</th>
                            <th>Mobile</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>LD 22</td>
                            <td>573-221-0294</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>LD 24</td>
                            <td>573-242-3524</td>
                            <td>573-242-3510</td>
                        </tr>
                        <tr>
                            <td>LD 25</td>
                            <td>636-566-8120</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>Mel Price</td>
                            <td>618-462-1713</td>
                            <td>636-899-1543</td>
                        </tr>
                        <tr>
                            <td>LD 27</td>
                            <td>618-452-7107</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>Kaskaskia LD</td>
                            <td>618-284-7160</td>
                            <td>-</td>
                        </tr>
                    </tbody>
                </table>

                <table id="gage_data2" style="display:none;">
                    <thead>
                        <tr>
                            <th>Locks and Dams</th>
                            <th>Work</th>
                            <th>Mobile</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Carlyle</td>
                            <td>618-594-2484</td>
                            <td>618-274-2008</td>
                        </tr>
                        <tr>
                            <td>Mark Twain</td>
                            <td>573-735-4097</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>Rend</td>
                            <td>618-724-2493</td>
                            <td>618-724-7069</td>
                        </tr>
                        <tr>
                            <td>Shelbyville</td>
                            <td>217-774-3951</td>
                            <td>217-383-1747</td>
                        </tr>
                        <tr>
                            <td>Wappapello</td>
                            <td>573-222-8562</td>
                            <td>573-464-7214</td>
                        </tr>
                    </tbody>
                </table>

                <table id="gage_data3" style="display:none;">
                    <thead>
                        <tr>
                            <th>NWS NCRFC</th>
                            <th>Work</th>
                            <th>Mobile</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Operations</td>
                            <td>952-361-6660</td>
                            <td>-</td>
                        </tr>
                    </tbody>
                </table>
                <br>
            </div>
            <button id="returnTop" title="Return to Top of Page">Top</button>
        </div>
    </div>
    <footer id="footer">
        <!--Footer content populated here by script tag at end of body -->
    </footer>
    <script src="js/libraries/jQuery-3.3.6.min.js"></script>
    <script defer>
        // When the document has loaded pull in the page header and footer skins
        $(document).ready(function () {
            $('#header').load('templates/DISTRICT.header.html');
            $('#footer').load('templates/DISTRICT.footer.html');
        })
    </script>
</body>

</html>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Create a URL object with the current page URL
        const urlParams = new URLSearchParams(window.location.search);

        // Update the Title
        title = `${office} Realtime LD Gate Summary`;


        if (title) {
            document.title = title;
            const titleSpan = document.querySelector('.titleLabel.title');
            if (titleSpan) {
                titleSpan.textContent = title;
            }
        }
    });
</script>